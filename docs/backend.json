
{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the Atelier Luxe catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Product entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the product."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "The price of the product."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product's main image."
        },
        "category": {
          "type": "string",
          "description": "The category the product belongs to (e.g., Men's Clothing, Women's Clothing)."
        },
        "additionalImageUrls": {
          "type": "array",
          "description": "URLs of additional images for the product.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "price",
        "imageUrl",
        "category"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review for a product.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Review entity."
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N Review)"
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Review)"
        },
        "userName": {
          "type": "string",
          "description": "The name of the user who left the review."
        },
        "rating": {
          "type": "number",
          "description": "The rating given in the review (e.g., 1 to 5)."
        },
        "comment": {
          "type": "string",
          "description": "The text of the review."
        },
        "createdAt": {
          "type": "string",
          "description": "The date the review was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "productId",
        "userId",
        "userName",
        "rating",
        "comment",
        "createdAt"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a user. Orders are stored in a top-level 'orders' collection.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Order entity, generated by Firestore."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who placed the order. (Relationship: UserProfile 1:N Order)"
        },
        "shippingInfo": {
          "type": "object",
          "description": "The shipping details provided by the user.",
          "properties": {
            "name": { "type": "string" },
            "email": { "type": "string" },
            "address": { "type": "string" },
            "city": { "type": "string" },
            "zip": { "type": "string" },
            "country": { "type": "string" }
          },
          "required": ["name", "email", "address", "city", "zip", "country"]
        },
        "items": {
          "type": "array",
          "description": "The items included in the order.",
          "items": {
            "type": "object",
            "properties": {
              "productId": {"type": "string"},
              "name": {"type": "string"},
              "price": {"type": "number"},
              "quantity": {"type": "number"}
            },
            "required": ["productId", "name", "price", "quantity"]
          }
        },
        "subtotal": {
          "type": "number",
          "description": "The subtotal amount of the order before shipping and taxes."
        },
        "shipping": {
            "type": "number",
            "description": "The shipping cost for the order."
        },
        "taxes": {
            "type": "number",
            "description": "The tax amount for the order."
        },
        "totalAmount": {
          "type": "number",
          "description": "The total amount of the order."
        },
        "orderDate": {
          "type": "string",
          "description": "The date the order was placed (server timestamp).",
          "format": "date-time"
        },
        "paymentStatus": {
          "type": "string",
          "description": "The status of the payment (e.g., pending, processing, completed, rejected).",
          "enum": ["pending", "processing", "completed", "rejected"]
        },
        "receiptImageUrl": {
          "type": "string",
          "description": "A URL to the user's payment receipt image stored in Firebase Storage."
        }
      },
      "required": [
        "userId",
        "shippingInfo",
        "items",
        "subtotal",
        "shipping",
        "taxes",
        "totalAmount",
        "orderDate",
        "paymentStatus"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents user profile information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity, same as the Firebase Auth UID."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "The user's first name."
        },
        "lastName": {
          "type": "string",
          "description": "The user's last name."
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Indicates if the user has administrative privileges."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the user's profile picture, stored as a Base64 Data URI."
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "Receipt": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Receipt",
      "type": "object",
      "description": "Represents a payment receipt uploaded by a user for an order.",
      "properties": {
        "orderId": {
          "type": "string",
          "description": "The ID of the order this receipt is for. Corresponds to the local order ID."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who uploaded the receipt."
        },
        "receiptDataUrl": {
          "type": "string",
          "description": "The Base64 encoded data URL of the receipt image."
        },
        "uploadedAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the receipt was uploaded."
        }
      },
      "required": [
        "orderId",
        "userId",
        "receiptDataUrl",
        "uploadedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/products/{productId}": {
      "schema": {
        "$ref": "#/entities/Product"
      },
      "description": "Stores product information. Accessible to all users for reading."
    },
    "/products/{productId}/reviews/{reviewId}": {
      "schema": {
        "$ref": "#/entities/Review"
      },
      "description": "Stores reviews for each product. Anyone can read reviews, but only authenticated users can create them."
    },
    "/userProfiles/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores user profile information. Only the authenticated user can read/write their own profile. Admins have special access."
    },
    "/orders/{orderId}": {
      "schema": {
        "$ref": "#/entities/Order"
      },
      "description": "Stores all order information. Any authenticated user can create their own order. Admins can read all orders."
    },
    "/receipts/{receiptId}": {
      "schema": {
        "$ref": "#/entities/Receipt"
      },
      "description": "Stores uploaded payment receipts. The receiptId should match the local orderId. Authenticated users can create receipts for their own orders."
    }
  }
}

    